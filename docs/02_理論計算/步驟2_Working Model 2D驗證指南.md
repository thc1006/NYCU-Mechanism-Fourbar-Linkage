# 步驟 2：Working Model 2D 驗證詳細指南

## 📋 本文重點

這份文件會手把手教你：
1. 怎麼在 Working Model 2D 裡面把機構建起來
2. 如何設定正確的參數和約束
3. 怎麼跑模擬並確保沒有碰撞問題
4. 如何截圖和錄影（報告要用）

---

## 1. Working Model 2D 基礎操作

### 1.1 軟體簡介

Working Model 2D 是一套專門用來模擬平面機構運動的軟體，在台灣很多機構學課程都會用它。

**主要功能**：
- 建立連桿、桿件
- 設定樞軸（pin joint）、滑塊（slider）等約束
- 加馬達或外力
- 模擬真實的運動過程
- 匯出動畫和數據

### 1.2 軟體安裝與設定

**取得軟體**：
- 學校通常有授權版本
- 或使用試用版（功能完整但有時間限制）

**單位設定**：

打開軟體後，先設定單位為公制：

```
選單：World → Units...
長度：centimeters (cm)
角度：degrees (°)
時間：seconds (s)
```

這樣等等輸入數值時就直接用公分，比較不會搞混。

### 1.3 介面說明

```
╔════════════════════════════════════════╗
║  檔案 編輯 視圖 物件 測量 模擬 視窗 說明   ║
╠════════════════════════════════════════╣
║ [工具列] 選取 桿件 樞軸 馬達 彈簧...      ║
╠════════════════════════════════════════╣
║                                        ║
║                                        ║
║         工作區域                        ║
║      (在這裡畫機構)                     ║
║                                        ║
║                                        ║
╠════════════════════════════════════════╣
║  [屬性面板]                             ║
║  位置: x=___ y=___                      ║
║  長度: ___                              ║
║  角度: ___                              ║
╚════════════════════════════════════════╝
```

---

## 2. 建立機構模型 - 詳細步驟

### 2.1 第一步：建立地面（Ground）

地面就是固定不動的參考框架，我們的固定樞軸會裝在上面。

**操作步驟**：

1. 點選工具列的「矩形工具」（Rectangle）

2. 在工作區畫一個矩形代表櫃體

   **尺寸**：
   - 寬度：40 cm
   - 高度：80 cm
   - 位置：左下角在原點 (0, 0)

3. 選取這個矩形，按右鍵 → Properties（屬性）

4. 勾選「Fixed」（固定）或「Anchor」（錨定）

   這樣這個物體就變成地面，不會動了。

**小技巧**：
- 可以把地面設成半透明或淺灰色，這樣等等建立的機構比較清楚
- 顏色設定：Properties → Appearance → Fill Color

### 2.2 第二步：建立固定樞軸點

現在要把兩個固定樞軸 $O_2$ 和 $O_4$ 放上去。

#### 建立 $O_2$ (下方固定點)

**操作步驟**：

1. 點選工具列的「Point」或「Anchor Point」工具

2. 在座標 $(8, 0)$ 的位置點一下

   **如何精確定位**：
   - 方法 1：點一下後，在屬性面板輸入精確座標
   - 方法 2：先隨便點，再用數字鍵盤輸入座標

3. 確認這個點已經固定在地面上

   - 選取點 → Properties → 確認 Anchored 或 Fixed

#### 建立 $O_4$ (上方固定點)

**操作步驟**：

同樣方法，在座標 $(8, 30)$ cm 建立另一個固定點。

**檢查**：
- $O_2$ 和 $O_4$ 之間的距離應該是 30 cm
- 可以用測量工具確認：Measure → Distance

### 2.3 第三步：建立連桿

我們需要建立兩根長度 50 cm 的連桿（$L_2$ 和 $L_4$）。

#### 建立連桿 $L_2$ (下方連桿)

**操作步驟**：

1. 點選工具列的「Bar」或「Rod」工具

2. 從 $O_2$ 的位置開始，拖曳到長度 50 cm

   **初始角度**：與垂直線夾角 20°

   計算終點座標：
   $$
   \begin{align}
   x_{\text{end}} &= 8 + 50 \sin 20° = 25.1 \text{ cm} \\
   y_{\text{end}} &= 0 + 50 \cos 20° = 47.0 \text{ cm}
   \end{align}
   $$

3. 設定連桿屬性

   **Properties**：
   - Length: 50 cm（確認長度正確）
   - Mass: 0.5 kg（假設質量，視實際情況調整）
   - Appearance: 設成藍色或其他顏色以便識別

**小技巧**：
- 可以先隨便畫，再到 Properties 裡精確設定長度和角度
- 角度定義：通常 0° 是水平向右，90° 是垂直向上

#### 建立連桿 $L_4$ (上方連桿)

**操作步驟**：

同樣方法，從 $O_4 = (8, 30)$ 開始，畫一根 50 cm 的連桿，角度也是 20°。

終點座標：
$$
\begin{align}
x_{\text{end}} &= 8 + 50 \sin 20° = 25.1 \text{ cm} \\
y_{\text{end}} &= 30 + 50 \cos 20° = 77.0 \text{ cm}
\end{align}
$$

### 2.4 第四步：建立層架（連接桿）

層架是連接兩根連桿的水平桿件。

**操作步驟**：

1. 點選「Bar」工具

2. 從點 A $(25.1, 47.0)$ 畫到點 B $(25.1, 77.0)$

   **注意**：這是垂直的！長度 = 30 cm

3. 實際的層架面積

   為了視覺化，可以在連接桿上加一個矩形代表層架：

   - 工具：Rectangle
   - 尺寸：30 cm × 24 cm（寬 × 深）
   - 位置：連接在 A-B 桿件上
   - 操作：選取矩形和連接桿 → Join（結合）

**層架外觀設定**：
- 可以設成木頭顏色（褐色）
- 或加材質貼圖讓它看起來像真的層架

### 2.5 第五步：設定樞軸約束（Joint）

現在機構的零件都建好了，但它們還不會動。我們需要設定「樞軸」讓它們可以轉動。

#### 設定樞軸 - 連桿與地面的連接

**$O_2$ 處的樞軸**：

1. 點選工具列的「Pin Joint」（鉸鏈）工具

2. 點在 $O_2$ 的位置，連接：
   - 地面（Ground）
   - 連桿 $L_2$

3. 設定屬性

   **Properties**：
   - Type: Pin（轉動樞軸）
   - Friction: 0（先不考慮摩擦）

**$O_4$ 處的樞軸**：

同樣方法，在 $O_4$ 處設定樞軸，連接地面和連桿 $L_4$。

#### 設定樞軸 - 連桿與層架的連接

**點 A 處的樞軸**：

連接：
- 連桿 $L_2$ 的上端
- 層架（連接桿 $L_3$）的下端

**點 B 處的樞軸**：

連接：
- 連桿 $L_4$ 的上端
- 層架（連接桿 $L_3$）的上端

**完成後檢查**：

機構應該有 4 個樞軸：
- $O_2$：地面 ↔ 連桿 $L_2$
- $O_4$：地面 ↔ 連桿 $L_4$
- A：連桿 $L_2$ ↔ 層架
- B：連桿 $L_4$ ↔ 層架

---

## 3. 設定驅動與控制

### 3.1 添加馬達（Motor）

要讓機構動起來，我們需要加一個馬達在某個樞軸上。

**建議位置**：$O_2$ 樞軸

**操作步驟**：

1. 點選「Motor」工具（通常是齒輪圖示）

2. 點在 $O_2$ 樞軸上

3. 設定馬達屬性

   **Properties**：

   - **Type**: Rotary Motor（旋轉馬達）

   - **Control**: Position（位置控制，不是速度控制）

   - **Function**: 我們要讓連桿從 20° 轉到 70.2°

     可以用時間函數：

     ```
     angle(t) = 20 + (70.2 - 20) × (t / 5)
     ```

     意思是在 5 秒內從 20° 線性轉到 70.2°

**Working Model 的函數語法**：

```
20 + 50.2 * (time / 5)
```

**或者使用更平滑的運動（正弦函數）**：

```
20 + 50.2 * (1 - cos(pi * time / 5)) / 2
```

這樣速度會漸進式加快再減慢，比較符合實際操作。

### 3.2 設定模擬時間與精度

**操作步驟**：

1. 選單：World → Accuracy...（精度設定）

   - Integration method: Kutta-Merson（建議）
   - Frames per second: 30（每秒 30 幀，夠流暢）

2. 選單：World → Run Duration...（模擬時間）

   - Duration: 5 seconds（或更長，看你的馬達設定）

---

## 4. 執行模擬與檢查

### 4.1 第一次模擬測試

**操作步驟**：

1. 點選工具列的「Run」按鈕（播放圖示）▶️

2. 觀察機構的運動

   **檢查項目**：
   - [ ] 層架有沒有保持水平？
   - [ ] 層架有沒有向下、向外移動？
   - [ ] 有沒有零件穿過櫃體（碰撞）？
   - [ ] 有沒有出現奇怪的抖動或爆炸？

**常見問題排除**：

**問題 1**：層架不是水平的

**原因**：不是真的平行四邊形，連桿長度或位置有誤。

**解法**：
- 檢查 $L_2 = L_4 = 50$ cm
- 檢查 $L_1 = L_3 = 30$ cm
- 檢查四個樞軸的位置

**問題 2**：機構爆炸或亂飛

**原因**：約束設定錯誤，自由度太多。

**解法**：
- 確認地面有固定（Anchored）
- 確認所有樞軸都正確連接兩個物體
- 減小馬達速度或扭矩

**問題 3**：運動方向相反

**原因**：馬達轉向設定錯誤。

**解法**：
- 馬達屬性 → Direction → 改成 CCW（逆時針）或 CW（順時針）
- 或者函數改成負的

### 4.2 碰撞檢測

**方法 1：視覺檢查**

- 播放模擬，用眼睛看有沒有零件穿過櫃體

**方法 2：使用碰撞偵測功能**

Working Model 有內建的碰撞偵測：

1. 選單：Measure → Collision...

2. 選擇要檢測的物體：
   - Object 1: 層架（或連桿）
   - Object 2: 地面（櫃體）

3. Run 模擬，如果有碰撞會顯示訊息或改變顏色

**如果發生碰撞**：

需要調整設計參數：
- 減小層架深度（從 24 cm 改成 22 cm）
- 調整固定樞軸位置
- 改變角度範圍

### 4.3 測量與驗證

**測量下降距離**：

1. 選單：Measure → Position...

2. 選擇點 A（或層架中心）

3. 測量「y 座標」隨時間的變化

4. 確認：
   $$
   \Delta h = y_{\text{初始}} - y_{\text{最終}} \geq 30 \text{ cm}
   $$

**在 Working Model 裡查看數據**：

- 模擬時會顯示即時數值
- 可以匯出成 CSV 檔案用 Excel 分析

**公式驗證**：

從步驟 1 的計算，我們得到：

| 狀態 | 理論值 $y_A$ | 模擬值 $y_A$ | 誤差 |
|------|--------------|--------------|------|
| 初始 | 47.0 cm | ? cm | ? |
| 最終 | 17.0 cm | ? cm | ? |
| $\Delta h$ | 30.0 cm | ? cm | ? |

把模擬值填進去，誤差應該小於 0.1 cm（Working Model 的精度很高）。

---

## 5. 截圖與錄影

### 5.1 截取關鍵位置

**要求**：至少 4 個位置

**建議位置**：

1. **Position 1**：初始狀態（$\alpha = 20°$）
   - 層架完全在櫃內

2. **Position 2**：中間狀態 1（$\alpha = 40°$）
   - 層架開始伸出

3. **Position 3**：中間狀態 2（$\alpha = 60°$）
   - 層架大幅伸出並下降

4. **Position 4**：最終狀態（$\alpha = 70.2°$）
   - 層架完全下降

**操作步驟**：

1. **暫停模擬**

   播放到想要的時間點，按「Pause」暫停。

2. **調整視角**

   確保整個機構和櫃體都在畫面內。

   - 縮放：滾輪或 View → Zoom
   - 平移：按住空白鍵拖曳

3. **截圖**

   **方法 A**：Working Model 內建截圖

   - File → Save Picture As...
   - 格式選 PNG 或 JPG
   - 解析度選高（300 dpi）

   **方法 B**：系統截圖

   - Windows: `Win + Shift + S`
   - 框選工作區域
   - 貼到 Word 或 PowerPoint

4. **標註**

   在圖片上標註關鍵資訊：
   - 角度 $\alpha$
   - 時間 $t$
   - 座標（如果需要）

**範例標註**：

```
Position 1: 初始狀態
α₁ = 20°
t = 0 s
層架位置：(25.1, 62.0) cm
```

### 5.2 錄製完整運動影片

**為什麼要錄影？**

- 報告加分項
- 可以看到完整的運動過程
- 證明機構確實可行

**操作步驟**：

**方法 A**：Working Model 內建錄影

1. 選單：File → Record Movie...

2. 設定：
   - 檔案格式：AVI 或 MP4
   - 幀率：30 fps
   - 解析度：800×600 或更高

3. 按「Record」開始，然後播放模擬

4. 結束後按「Stop」

**方法 B**：使用螢幕錄影軟體

- **Windows 10/11**：
  - `Win + G` 開啟遊戲列
  - 按錄影按鈕（圓形紅點）
  - 播放模擬
  - 結束後按停止

- **第三方軟體**：
  - OBS Studio（免費）
  - Camtasia（付費但功能強大）

**影片後製（選配）**：

可以用簡單的影片編輯軟體加上：
- 標題文字（如「設計方案 1」）
- 速度調整（放慢關鍵時刻）
- 背景音樂（如果想要的話，但學術報告通常不需要）

---

## 6. 輸出報告用的圖表

### 6.1 位置-時間圖

**要顯示什麼**：

層架中心點的 $y$ 座標隨時間變化。

**操作步驟**：

1. 模擬時，Measure → Position → 選擇層架中心

2. 選擇 Plot（繪圖）選項

3. Working Model 會自動產生圖表

4. 匯出圖表：
   - 右鍵 → Copy Image
   - 或 Export Data to CSV 用 Excel 畫圖

**預期結果**：

```
y (cm)
 70 │╲
    │ ╲
 60 │  ╲
    │   ╲
 50 │    ╲___
    │        ╲___
 40 │            ╲___
    │                ╲___
 30 │                    ╲
    └─────────────────────────→ t (s)
    0   1   2   3   4   5
```

這條曲線應該平滑下降，沒有突然的跳躍或震盪。

### 6.2 角度-時間圖

**要顯示什麼**：

驅動桿的角度 $\alpha$ 隨時間變化。

**操作步驟**：

類似上面，但測量的是連桿 $L_2$ 的角度。

**預期結果**：

```
α (°)
 80 │                    ╱───
    │                ╱╱╱╱
 60 │            ╱╱╱╱
    │        ╱╱╱╱
 40 │    ╱╱╱╱
    │╱╱╱╱
 20 │
    └─────────────────────────→ t (s)
    0   1   2   3   4   5
```

如果用線性馬達控制，這條線是直的；如果用正弦函數，會是 S 形曲線。

### 6.3 速度與加速度分析（進階）

如果想做得更完整，可以分析：

**速度分析**：

- 層架下降的速度 $v_y = dy/dt$
- 應該不要太快（避免物品滑落）
- 建議 $v_y < 10$ cm/s

**加速度分析**：

- 加速度 $a_y = d^2y/dt^2$
- 太大的加速度會造成震動
- 建議 $a_y < 5$ cm/s²

**在 Working Model 裡測量**：

- Measure → Velocity...
- Measure → Acceleration...

---

## 7. 驗證檢查清單

### 7.1 機構正確性

- [ ] 平行四邊形幾何確認（$L_2 = L_4$, $L_1 = L_3$）
- [ ] 四個樞軸位置正確
- [ ] 層架保持水平（誤差 < 1°）
- [ ] 下降距離 $\Delta h \geq 30$ cm

### 7.2 運動品質

- [ ] 運動平滑，無抖動
- [ ] 無奇異位置（死點）
- [ ] 無突然的速度變化
- [ ] 整個過程穩定

### 7.3 空間約束

- [ ] 初始狀態：完全在櫃內
- [ ] 運動過程：無碰撞
- [ ] 最終狀態：適當伸出，方便拿取

### 7.4 報告素材

- [ ] 至少 4 張高解析度截圖
- [ ] 截圖已標註關鍵資訊
- [ ] 運動影片（5-10 秒）
- [ ] 位置-時間圖表
- [ ] 測量數據（CSV 檔案）

---

## 8. 常見問題與解決

### Q1：模擬時機構亂飛或爆炸

**可能原因**：
- 約束設定不正確
- 物體重疊造成巨大作用力
- 積分精度不夠

**解決方法**：
1. 檢查所有樞軸是否正確連接
2. 確認沒有物體在初始狀態重疊
3. 提高積分精度：World → Accuracy → 選擇更高階的方法
4. 降低馬達速度或扭矩

### Q2：層架沒有保持水平

**可能原因**：
- 連桿長度不相等
- 固定點位置偏移
- 樞軸設定錯誤

**解決方法**：
1. 用測量工具精確檢查 $L_2$ 和 $L_4$ 的長度
2. 檢查 $O_2$ 和 $O_4$ 的座標
3. 確認四個樞軸都是 Pin Joint（不是 Slot 或其他類型）

### Q3：下降距離不足 30 cm

**可能原因**：
- 角度範圍設定錯誤
- 連桿長度不對
- 馬達沒有轉到預定角度

**解決方法**：
1. 檢查馬達函數是否正確
2. 用測量工具看最終角度是否達到 70.2°
3. 如果接近但不夠，微調 $\alpha_2$（如改成 71°）

### Q4：碰撞問題

**情況 A**：初始狀態就碰撞

- 層架太深（$D_{\text{shelf}}$ 太大）
- 調小到 22 cm 或更小

**情況 B**：中間過程碰撞

- 固定點位置需要調整
- 或改變角度範圍
- 使用步驟 3 的優化方法重新設計

### Q5：影片或截圖不清楚

**解決方法**：
- 提高解析度設定
- 放大視圖讓機構佔據大部分畫面
- 使用淺色背景（白色或淺灰）
- 關閉不必要的格線或標籤

---

## 9. 輸出檔案整理

### 9.1 檔案命名規範

**建議命名方式**：

```
設計方案1_初始狀態.png
設計方案1_中間狀態1.png
設計方案1_中間狀態2.png
設計方案1_最終狀態.png
設計方案1_運動影片.mp4
設計方案1_位置時間圖.png
設計方案1_WM2D工作檔.wm2d
```

這樣在報告裡引用時比較清楚。

### 9.2 報告中的呈現方式

**圖片排版建議**：

使用 2×2 的排列方式，像這樣：

```
┌──────────────┬──────────────┐
│  Position 1  │  Position 2  │
│  初始狀態     │  中間狀態 1   │
│  α=20°       │  α=40°       │
└──────────────┴──────────────┘
┌──────────────┬──────────────┐
│  Position 3  │  Position 4  │
│  中間狀態 2   │  最終狀態     │
│  α=60°       │  α=70.2°     │
└──────────────┴──────────────┘
```

每張圖下方加上圖說（Caption）：

```
圖 2-1：設計方案 1 的四個關鍵位置
(a) 初始狀態，α = 20°，層架完全收納
(b) 中間狀態 1，α = 40°，層架開始下降
(c) 中間狀態 2，α = 60°，層架大幅下降
(d) 最終狀態，α = 70.2°，下降 30 cm
```

**影片的處理**：

- 如果報告是 PDF：提供影片的連結或 QR code
- 如果是 PowerPoint：直接嵌入影片
- 額外提交：影片作為單獨檔案上傳

---

## 10. 進階技巧（選配）

### 10.1 添加彈簧緩衝

實際的下拉式層架可能會加彈簧或氣壓桿，讓運動更平穩。

**操作步驟**：

1. 工具：Spring（彈簧）

2. 連接在：
   - 固定點（地面上某處）
   - 層架或連桿

3. 設定屬性：
   - Spring constant $k$（彈簧係數）
   - Damping $c$（阻尼係數）

**效果**：
- 層架下降時有緩衝，不會突然停止
- 更接近實際產品

### 10.2 添加止擋器（Stopper）

防止層架轉過頭或回彈。

**方法**：

用「Limit Stop」或「Contact」設定：

- 最大角度限制：$\alpha_{\max} = 70.2°$
- 最小角度限制：$\alpha_{\min} = 20°$

### 10.3 力學分析

如果想更深入，可以分析：

**連桿受力**：
- Measure → Force...
- 選擇樞軸或連桿

**扭矩需求**：
- 計算馬達需要多大的扭矩才能驅動
- 考慮層架的負載（如放了 5 kg 的物品）

**安全係數**：
- 連桿會不會斷裂？
- 需要多粗的桿件？

這些可以放在報告的「討論」部分，展現深入思考。

---

## 11. 下一步

完成 Working Model 2D 驗證後：

### 11.1 確認設計可行

如果模擬沒問題，恭喜！設計方案 1 是可行的。

### 11.2 記錄所有數據

把模擬結果整理成表格：

| 參數 | 理論值 | 模擬值 | 誤差 |
|------|--------|--------|------|
| $\Delta h$ | 30.0 cm | ? cm | ? |
| $\Delta x$ | 29.9 cm | ? cm | ? |
| 初始 $y_A$ | 47.0 cm | ? cm | ? |
| 最終 $y_A$ | 17.0 cm | ? cm | ? |

這個表格會放在報告的第 4 部分（模擬結果）。

### 11.3 準備優化

如果發現一些問題（如儲存空間太小），可以進入步驟 3：優化設計。

---

**下一步**：請閱讀「步驟 3：優化算法改進設計詳細流程.md」
